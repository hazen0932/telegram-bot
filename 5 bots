import asyncio
from telegram import Update
from telegram.ext import Application, MessageHandler, filters, ContextTypes

# ğŸ“Œ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙˆØªØ§Øª + Ø§Ù„Ù…Ø§Ù„Ùƒ
OWNER_ID = 5261225274
BOTS = [
    "832497738:AAF7H33ifOlgyXjlJXPQPI0Rfj-5H2R48c0",
    "6388201141:AAG7exDCssOrK9yuO-T0t2B_N7mRVVMfrd0",
    "6660568243:AAG2PwqTGBFapScGjvQH-gT0t2B_N7mRVVMfrd0",
    "6813048951:AAG3BS58Y-l6nkcZWdgC-DRnpI58NEEZjck",
    "6830256324:AAGAjOj2DP0BjKXo4hH_XZR_Lu0ogGFFReA",
]

async def notify_owner(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø§Ù„Ùƒ"""
    user = update.effective_user
    message = update.message.text if update.message else "âŒ Ø¨Ø¯ÙˆÙ† Ø±Ø³Ø§Ù„Ø©"

    first_name = user.first_name or "Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"
    last_name = user.last_name or ""
    username = f"@{user.username}" if user.username else "âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙŠÙˆØ²Ø±"
    user_id = user.id

    text = (
        "ğŸš¨ Ù…Ø³ØªØ®Ø¯Ù… ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¨ÙˆØª\n\n"
        f"ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: {first_name} {last_name}\n"
        f"ğŸ”— Ø§Ù„ÙŠÙˆØ²Ø±: {username}\n"
        f"ğŸ†” ID: {user_id}\n"
        f"ğŸ’¬ Ø§Ù„Ø±Ø³Ø§Ù„Ø©: {message}"
    )

    # ÙŠØ±Ø³Ù„ Ù„Ùƒ Ø£Ù†Øª ÙÙ‚Ø· (Ø§Ù„Ù…Ø§Ù„Ùƒ)
    try:
        await context.bot.send_message(chat_id=OWNER_ID, text=text)
    except Exception as e:
        print(f"Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±: {e}")

def create_app(token: str):
    """Ø¥Ù†Ø´Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ù„Ø¨ÙˆØª ÙˆØ§Ø­Ø¯"""
    app = Application.builder().token(token).build()
    handler = MessageHandler(filters.TEXT & ~filters.COMMAND, notify_owner)
    app.add_handler(handler)

    # Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§: Ø­ØªÙ‰ Ø±Ø³Ø§Ø¦Ù„ /start ØªØµÙ„ Ù„Ù„Ù…Ø§Ù„Ùƒ
    app.add_handler(MessageHandler(filters.COMMAND, notify_owner))
    return app

async def main():
    """ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙˆØªØ§Øª ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯"""
    apps = [create_app(token) for token in BOTS]
    await asyncio.gather(*(app.run_polling() for app in apps))

if __name__ == "__main__":
    print("ğŸ¤– Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙˆØªØ§Øª ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†... ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„")
    asyncio.run(main())
