from telegram import Update
from telegram.ext import Application, MessageHandler, filters, ContextTypes

TOKEN = "5889727085:AAHGcKmVfe6tDtBRlAc6ZjfU9rSrKOfPYHk"
OWNER_ID = 5261225274  # ID الخاص بك

async def notify_owner(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    message = update.message.text

    # تجهيز بيانات المستخدم
    first_name = user.first_name or "بدون اسم"
    username = f"@{user.username}" if user.username else "❌ لا يوجد يوزر"
    user_id = user.id

    # إرسال إشعار لك أنت فقط
    text = (
        f"🚨 مستخدم أرسل رسالة\n\n"
        f"👤 الاسم: {first_name}\n"
        f"🔗 اليوزر: {username}\n"
        f"🆔 ID: {user_id}\n"
        f"💬 الرسالة: {message}"
    )
    await context.bot.send_message(chat_id=OWNER_ID, text=text)

def main():
    app = Application.builder().token(TOKEN).build()

    # معالج لأي رسالة نصية (بما فيها /start)
    app.add_handler(MessageHandler(filters.TEXT, notify_owner))

    print("🤖 البوت يعمل الآن (polling)...")
    app.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == "__main__":
    main()
